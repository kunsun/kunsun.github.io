3:I[9275,[],""]
5:I[1343,[],""]
6:I[9512,["291","static/chunks/291-6bbee38a07e9cada.js","185","static/chunks/app/layout-3bb9540adf3efcfb.js"],"ThemeProvider"]
7:I[8871,["291","static/chunks/291-6bbee38a07e9cada.js","185","static/chunks/app/layout-3bb9540adf3efcfb.js"],"default"]
4:["slug","hmr","d"]
0:["zfWWkEPTd4BtmYFJI25CP",[[["",{"children":["blog",{"children":[["slug","hmr","d"],{"children":["__PAGE__?{\"slug\":\"hmr\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","hmr","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/cb67a214fed64752.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"zh-CN","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_c1e5c9 __variable_3a0388","children":["$","$L6",null,{"attribute":"class","children":[["$","$L7",null,{}],["$","main",null,{"className":"flex max-w-2xl mx-auto bg-gradient","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/14d650bd7f8bf870.css","precedence":"next","crossOrigin":"$undefined"}]],"$L8"]]]]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Create Next App"}],["$","meta","3",{"name":"description","content":"Generated by create next app"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","meta","5",{"name":"next-size-adjust"}]]
1:null
2:["$","main",null,{"className":"font-mono","children":[["$","h1",null,{"children":"热更新 Hot Module Replacement"}],["$","div",null,{"className":"text-[14px] text-tertiary mt-1","children":"2021-02-02"}],["$","div",null,{"className":"markdown mt-10","children":"$L9"}]]}]
9:[["$","ol",null,{"children":["\n",["$","li",null,{"children":"不刷新浏览器"}],"\n",["$","li",null,{"children":"不进行 IO 操作，放在内存中"}],"\n",["$","li",null,{"children":"webpack 中配合 HotModuleReplacementPlugin 插件"}],"\n"]}],"\n",["$","p",null,{"children":"也可以用 webpack-dev-middleware，更加灵活"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"参考文章：\nhttps://zhuanlan.zhihu.com/p/30669007\nhttps://juejin.im/post/5de0cfe46fb9a071665d3df0"}],"\n"]}],"\n",["$","h2",null,{"children":"关键角色"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"webpack-dev-server:"}],"\n",["$","li",null,{"children":"websocket:"}],"\n",["$","li",null,{"children":"浏览器："}],"\n"]}],"\n",["$","h2",null,{"children":"过程："}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"监听文件变化，打包文件"}],"\n",["$","li",null,{"children":"webpack-dev-middleware 调用 webpack 暴露的 API 对代码变化进行监控，并且告诉 webpack，将代码打包到内存中"}],"\n",["$","li",null,{"children":"webpack-dev-server 对文件变化的监控"}],"\n",["$","li",null,{"children":"用 websocket 传递给浏览器一个更新后信息，包括的 hash 值"}],"\n",["$","li",null,{"children":"浏览器再把信息传递给 server，server 决定刷新方式，如果是 hmr 不是 live reload,则往下走"}],"\n",["$","li",null,{"children":"浏览器有个 runtime 文件，向 server 发送 hash，server 返回 json，包括所有要更新的模块"}],"\n"]}],"\n",["$","h2",null,{"children":"官方描述"}],"\n",["$","h3",null,{"children":"App 中"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"App 要求 HMR runtime 检查更新"}],"\n",["$","li",null,{"children":"HMR runtime 异步下载更新，然后通知 App"}],"\n",["$","li",null,{"children":"App 要求 HMR runtime 更新"}],"\n",["$","li",null,{"children":"HMR runtime 同步地应用更新"}],"\n"]}],"\n",["$","h3",null,{"children":"在 compiler 中"}],"\n",["$","p",null,{"children":"除了普通资源，compiler 需要发出 \"update\"，将之前的版本更新到新的版本。\"update\" 由两部分组成："}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["更新后的 manifest (JSON)","\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["manifest 包括新的 compilation hash 和所有的 updated chunk 列表","\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"每个 chunk 都包含着全部更新模块的最新代码"}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":"一个或多个 updated chunk (JavaScript)"}],"\n"]}],"\n",["$","h2",null,{"children":"原理分析"}],"\n",["$","p",null,{"children":"WDS：webpack-dev-server, 作为 server 端"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"Webpack compile"}],"\n",["$","li",null,{"children":"HMR server"}],"\n",["$","li",null,{"children":"Bundle server"}],"\n"]}],"\n",["$","p",null,{"children":"Browser：浏览器端 bundle.js"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"HMR Runtime"}],"\n",["$","li",null,{"children":"your js code"}],"\n"]}],"\n",["$","p",null,{"children":"作用："}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"webpack compile： 将 JS 编译成 Bundle"}],"\n",["$","li",null,{"children":"HMR server：将热更新的文件传递给 HMR Runtime"}],"\n",["$","li",null,{"children":"Bundle server: 提供文件在浏览器访问"}],"\n",["$","li",null,{"children":"HMR Runtime：注入到浏览器，更新文件变化，通知给 HMR server"}],"\n",["$","li",null,{"children":"bundle.js: 构建输出文件"}],"\n"]}]]
