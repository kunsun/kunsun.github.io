3:I[3099,[],""]
5:I[2506,[],""]
6:I[3637,["177","static/chunks/177-274c75a00d0077d0.js","856","static/chunks/856-e3a3ce37a6ba7291.js","185","static/chunks/app/layout-b234c99f4218b945.js"],"ThemeProvider"]
7:I[2483,["177","static/chunks/177-274c75a00d0077d0.js","856","static/chunks/856-e3a3ce37a6ba7291.js","185","static/chunks/app/layout-b234c99f4218b945.js"],"default"]
4:["slug","tree-shaking","d"]
0:["PfK52rIU25hVrQueEeDIp",[[["",{"children":["blog",{"children":[["slug","tree-shaking","d"],{"children":["__PAGE__?{\"slug\":\"tree-shaking\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","tree-shaking","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"zh-CN","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"icon","href":"/favicon.ico","sizes":"any"}],["$","body",null,{"className":"__variable_c1e5c9 __variable_3a0388","children":["$","$L6",null,{"attribute":"class","children":[["$","$L7",null,{}],["$","main",null,{"className":"flex max-w-2xl w-2xl mx-auto bg-gradient","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]]}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e3c2fb5352ee446e.css","precedence":"next","crossOrigin":"$undefined"}]],"$L8"]]]]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"kunsun.me"}],["$","meta","3",{"name":"description","content":"Generated by create next app"}],["$","meta","4",{"name":"next-size-adjust"}]]
1:null
2:["$","article",null,{"className":"font-mono","children":[["$","h1",null,{"children":"Tree Shaking"}],["$","div",null,{"className":"text-[14px] text-tertiary mt-1","children":"2021-02-02"}],["$","div",null,{"className":"markdown markdown-body mt-10","children":"$L9"}]]}]
9:[["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"uglify 擦除无用代码"}],"\n",["$","h2",null,{"children":"概念"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"去掉 dead code\nDCE dead code elimination"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"代码不会被执行"}],"\n",["$","li",null,{"children":"代码执行的结果不会被用到"}],"\n",["$","li",null,{"children":"代码只会影响死变量"}],"\n"]}],"\n",["$","h2",null,{"children":"webpack 配置"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"webpack4 的 mode 设置为 production 自动开启 tree-shaking"}],"\n",["$","h2",null,{"children":"原理"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"利用 ES6 模块化，ES6 模块的特点："}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"import 只能在顶层出现"}],"\n",["$","li",null,{"children":"import 后就不可以修改"}],"\n"]}],"\n",["$","h2",null,{"children":"注意点"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"代码不能有副作用，不然 tree shaking 会失效"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"必须使用 ES6 语法"}],"\n"]}],"\n",["$","h2",null,{"children":"ES 模块化为什么要设计成静态的"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"一个明显的优势是：通过静态分析，我们能够分析出导入的依赖。如果导入的模块没有被使用，我们便可以通过 tree shaking 等手段减少代码体积，进而提升运行性能。这就是基于 ESM 实现 tree shaking 的基础。"}],"\n",["$","h2",null,{"children":"ES 模块化的静态性带来了限制："}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"只能在文件顶部 import 依赖\nexport 导出的变量类型严格限制\n变量不允许被重新绑定，import 的模块名只能是字符串常量，即不可以动态确定依赖"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"我们可以通过作用域分析，分析出代码里变量所属的作用域以及它们之间的引用关系，进而可以推导出变量和导入依赖变量的引用关系，在没有明显引用时，就可以进行去冗余。"}]]
