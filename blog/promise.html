<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/66f30814ff6d7cdf.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/92f44bb82993d879-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/e11418ac562b8ac1-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/e3c2fb5352ee446e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-27501c456ff6145b.js"/><script src="/_next/static/chunks/67cfe1a8-fc7c44b8310eda83.js" async=""></script><script src="/_next/static/chunks/221-cf67158bae7cf346.js" async=""></script><script src="/_next/static/chunks/main-app-36c4b43897480e26.js" async=""></script><script src="/_next/static/chunks/177-274c75a00d0077d0.js" async=""></script><script src="/_next/static/chunks/856-e3a3ce37a6ba7291.js" async=""></script><script src="/_next/static/chunks/app/layout-b234c99f4218b945.js" async=""></script><link rel="icon" href="/favicon.ico" sizes="any"/><title>kunsun.me</title><meta name="description" content="Generated by create next app"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__variable_c1e5c9 __variable_3a0388"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="bg-color border-neutral-100 dark:border-neutral-900 h-max  relative flex justify-between items-center mx-2 px-2 md:px-3 h-[60px]"><a class="font-sans inline-block text-2xl font-black scale-100 active:scale-100" style="opacity:1;transition:transform 0.2s ease-in-out, opacity 0.2s 0.4s linear" href="/"><div class="mt-3 flex items-center max-w-2xl"><img alt="" loading="lazy" width="28" height="28" decoding="async" data-nimg="1" style="color:transparent" src="/logo_2.png"/><div class="text-[16px] ml-[4px] font-mono">kunsun</div></div></a></div><main class="flex max-w-2xl w-2xl mx-auto bg-gradient"><article class="font-mono"><h1>Promise</h1><div class="text-[14px] text-tertiary mt-1">2021-02-02</div><div class="markdown markdown-body mt-10"><p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">Promise 构造函数返回一个 promise 对象实例，这个返回的 promise 具有 then 方法。then 方法中，调用者可以定义两个参数，分别是 onfulfilled 和 onrejected，他们都是函数类型。
其中 onfulfilled 通过参数可以获取 promise 对象的 resolved 的值；onrejected 获得 promise 对象 rejected 的值。通过这个值，我们来处理异步完成后的逻辑。
通过这个值，处理异步完成后的逻辑。</p>
<h2>第一步</h2>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">建立结构</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="javascript" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> Promise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">executor</span><span style="color:#D4D4D4">) {}</span></span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">onrejected</span><span style="color:#D4D4D4">) {}</span></span></code></pre></figure>
<h2>第二步</h2>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">完善基本框架</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="js" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> Promise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">executor</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">  const</span><span style="color:#4FC1FF"> self</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">this</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;pending&quot;</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">  function</span><span style="color:#DCDCAA"> resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">    self</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">value</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">  function</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">    self</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">reason</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#DCDCAA">  executor</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span></span>
<span data-line=""><span style="color:#9CDCFE">  onfulfilled</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">Function</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">,</span></span>
<span data-line=""><span style="color:#9CDCFE">  onrejected</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">Function</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span></span>
<span data-line=""><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">  onfulfilled</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">  onrejected</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h2>第三步</h2>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">加入异步逻辑：在合适的时候再执行 resolve</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="js" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> Promise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">executor</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;pending&quot;</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledFunc</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">Function</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedFunc</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">Function</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A9955">  // 自己的resolve函数，由调用者触发</span></span>
<span data-line=""><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> resolve</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">value</span><span style="color:#569CD6"> instanceof</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">      return</span><span style="color:#9CDCFE"> value</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#DCDCAA">    setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">value</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;fulfilled&quot;</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">onFulfilledFunc</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    })</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#6A9955">  // 自己的reject函数，由调用者触发</span></span>
<span data-line=""><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">reason</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;rejected&quot;</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">onRejectedFunc</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    })</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#6A9955">  // 调用时执行，参数是自己定义的reject与resolve</span></span>
<span data-line=""><span style="color:#6A9955">  // 立即执行</span></span>
<span data-line=""><span style="color:#DCDCAA">  executor</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">onreject</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">  onfulfilled</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> onfulfilled</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span><span style="color:#D4D4D4"> ? </span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4"> : (</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#9CDCFE"> data</span></span>
<span data-line=""><span style="color:#9CDCFE">  onrejected</span><span style="color:#D4D4D4"> =</span></span>
<span data-line=""><span style="color:#569CD6">    typeof</span><span style="color:#9CDCFE"> onrejected</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span></span>
<span data-line=""><span style="color:#D4D4D4">      ? </span><span style="color:#9CDCFE">onrejected</span></span>
<span data-line=""><span style="color:#D4D4D4">      : (</span><span style="color:#9CDCFE">error</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">          throw</span><span style="color:#9CDCFE"> error</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;fulfilled&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">    onfulfilled</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;rejected&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">    onrejected</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">    this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledFunc</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">onfulfilled</span></span>
<span data-line=""><span style="color:#569CD6">    this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedFunc</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">onrejected</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A9955">// 调用Promise，executor</span></span>
<span data-line=""><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> promise</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">  resolve</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;data&quot;</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">  setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    resolve</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;data&quot;</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }, </span><span style="color:#B5CEA8">2000</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#9CDCFE">promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#9CDCFE">  console</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">log</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">})</span></span>
<span data-line=""><span style="color:#9CDCFE">console</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">log</span><span style="color:#D4D4D4">(</span><span style="color:#B5CEA8">1</span><span style="color:#D4D4D4">)</span></span></code></pre></figure>
<h2>第四步：加入任务队列逻辑</h2>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">使用 setTimeout 模拟</p>
<h2>第五步：细节优化</h2>
<ol>
<li>抛出错误</li>
<li>将 onFulfilledFunc 存入数组</li>
</ol>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="javascript" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> Promise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">executor</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;pending&quot;</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedArr</span><span style="color:#D4D4D4"> = []</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledArr</span><span style="color:#D4D4D4"> = []</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> resolve</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">value</span><span style="color:#569CD6"> instanceof</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">      return</span><span style="color:#9CDCFE"> value</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#DCDCAA">    setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">value</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;fulfilled&quot;</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledArr</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">forEach</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">func</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">          func</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        })</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    })</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">reason</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;rejected&quot;</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedArr</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">forEach</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">func</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">          func</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        })</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    })</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    executor</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">    reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">onrejected</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">  onfulfilled</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> onfulfilled</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span><span style="color:#D4D4D4"> ? </span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4"> : (</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#9CDCFE"> data</span></span>
<span data-line=""><span style="color:#9CDCFE">  onrejected</span><span style="color:#D4D4D4"> =</span></span>
<span data-line=""><span style="color:#569CD6">    typeof</span><span style="color:#9CDCFE"> onrejected</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span></span>
<span data-line=""><span style="color:#D4D4D4">      ? </span><span style="color:#9CDCFE">onrejected</span></span>
<span data-line=""><span style="color:#D4D4D4">      : (</span><span style="color:#9CDCFE">error</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">          throw</span><span style="color:#9CDCFE"> error</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;fulfilled&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">    onfulfilled</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;rejected&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">    onrejected</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">    this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledArr</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#569CD6">    this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedArr</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">onrejected</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h2>第六步：链式调用</h2>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">一个 Promise 实例的 then 方法体 onfulfilled 函数和 onrejected 函数中，是支持再次返回一个 Promise 实例的，也支持返回非 Promise 的普通值。
修改 Promise.prototype.then:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="js" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">onrejected</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">  onfulfilled</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> onfulfilled</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span><span style="color:#D4D4D4"> ? </span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4"> : (</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#9CDCFE"> data</span></span>
<span data-line=""><span style="color:#9CDCFE">  onrejected</span><span style="color:#D4D4D4"> =</span></span>
<span data-line=""><span style="color:#569CD6">    typeof</span><span style="color:#9CDCFE"> onrejected</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span></span>
<span data-line=""><span style="color:#D4D4D4">      ? </span><span style="color:#9CDCFE">onrejected</span></span>
<span data-line=""><span style="color:#D4D4D4">      : (</span><span style="color:#9CDCFE">error</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">          throw</span><span style="color:#9CDCFE"> error</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#569CD6">  let</span><span style="color:#9CDCFE"> promise2</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;fulfilled&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">      setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">        try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">          let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onfulfilled</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">          resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">          reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""><span style="color:#D4D4D4">    }))</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;rejected&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">      setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">        try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">          let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onrejected</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">          reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">          reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""><span style="color:#D4D4D4">    }))</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">      this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledArray</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">        setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">          try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">            let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onfulfilled</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">            resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">            reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          }</span></span>
<span data-line=""><span style="color:#D4D4D4">        })</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""><span style="color:#569CD6">      this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedArr</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">        setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">          try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">            let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onrejected</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">            resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">            reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          }</span></span>
<span data-line=""><span style="color:#D4D4D4">        })</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""><span style="color:#D4D4D4">    }))</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h2>第七步：完善链式调用</h2>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">这里的逻辑有些复杂</p>
<h2>第八步：Promise 穿透实现</h2>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">如果 then 传入的 onfulfilled 与 onrejected 不为函数，则使用默认值</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="javascript" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> promise</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">  setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    resolve</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;kunsun&quot;</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }, </span><span style="color:#B5CEA8">2000</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">})</span></span>
<span data-line=""><span style="color:#9CDCFE">promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">null</span><span style="color:#D4D4D4">).</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#9CDCFE">  console</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">log</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">})</span></span></code></pre></figure>
<h2>第九步：Promise 静态方法与其他方法实现</h2>
<h3>Promise.prototype.catch</h3>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="js" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">catch</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">catchFunc</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> this</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">null</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">catchFunc</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h3>Promise.resolve</h3>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="js" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">resolve</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h3>Promise.reject</h3>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="js" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">reject</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h3>Promise.all</h3>
<blockquote>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">Promise.all(iterable) 方法返回一个 Promise 实例，此实例在 iterable 参数内所有的 promise 都完成时才 resolve。如果参数中 promise 有一个失败（rejected）,此实例失败，失败原因是第一个失败 promise 的结果。</p>
</blockquote>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="javascript" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">all</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promiseArr</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (!</span><span style="color:#9CDCFE">Array</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">isArray</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promiseArr</span><span style="color:#D4D4D4">)) {</span></span>
<span data-line=""><span style="color:#C586C0">    throw</span><span style="color:#569CD6"> new</span><span style="color:#DCDCAA"> Error</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;参数不是数组&quot;</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">      let</span><span style="color:#9CDCFE"> resolveArr</span><span style="color:#D4D4D4"> = []</span></span>
<span data-line=""><span style="color:#569CD6">      const</span><span style="color:#4FC1FF"> length</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">promiseArr</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">length</span></span>
<span data-line=""><span style="color:#C586C0">      for</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> i</span><span style="color:#D4D4D4"> = </span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4"> &lt; </span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">++) {</span></span>
<span data-line=""><span style="color:#9CDCFE">        promiseArr</span><span style="color:#D4D4D4">[</span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">].</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#9CDCFE">          resolveArr</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#C586C0">          if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">resolveArr</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4"> === </span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">            resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolveArr</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          }</span></span>
<span data-line=""><span style="color:#D4D4D4">        }, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">      reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h3>Promise.race</h3>
<blockquote>
<p class="text-[14px] text-neutral-100 dark:text-neutral-800 ">当 iterable 参数里任何一个成功或失败，直接返回</p>
</blockquote>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="js" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">race</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promiseArr</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (!</span><span style="color:#9CDCFE">Array</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">isArray</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promiseArr</span><span style="color:#D4D4D4">)) {</span></span>
<span data-line=""><span style="color:#C586C0">    throw</span><span style="color:#569CD6"> new</span><span style="color:#DCDCAA"> Error</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;参数不是数组&quot;</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">      const</span><span style="color:#4FC1FF"> length</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">primiseArr</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">length</span></span>
<span data-line=""><span style="color:#C586C0">      for</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> i</span><span style="color:#D4D4D4"> = </span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4"> &lt; </span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">++) {</span></span>
<span data-line=""><span style="color:#9CDCFE">        promiseArray</span><span style="color:#D4D4D4">[</span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">].</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">      reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h2>最终代码</h2>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0" data-language="javascript" data-theme="dark-plus"><code class="text-sm p-1"><span data-line=""><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> Promise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">executor</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;pending&quot;</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledArray</span><span style="color:#D4D4D4"> = []</span></span>
<span data-line=""><span style="color:#569CD6">  this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedArray</span><span style="color:#D4D4D4"> = []</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> resolve</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">value</span><span style="color:#569CD6"> instanceof</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">      return</span><span style="color:#9CDCFE"> value</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#DCDCAA">    setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">value</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;fulfilled&quot;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledArray</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">forEach</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">func</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">          func</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        })</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    })</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">  const</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">reason</span></span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> = </span><span style="color:#CE9178">&quot;rejected&quot;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">        this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedArray</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">forEach</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">func</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">          func</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        })</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    })</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    executor</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">    reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">const</span><span style="color:#DCDCAA"> resolvePromise</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#6A9955">  // 当 result 和 promise2 相等时，也就是说 onfulfilled 返回 promise2 时，进行 reject</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4"> === </span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">new</span><span style="color:#DCDCAA"> TypeError</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;error due to circular reference&quot;</span><span style="color:#D4D4D4">))</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A9955">  // 是否已经执行过 onfulfilled 或者 onrejected</span></span>
<span data-line=""><span style="color:#569CD6">  let</span><span style="color:#9CDCFE"> consumed</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">false</span></span>
<span data-line=""><span style="color:#569CD6">  let</span><span style="color:#9CDCFE"> thenable</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">result</span><span style="color:#569CD6"> instanceof</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">      result</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">        resolvePromise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    } </span><span style="color:#C586C0">else</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#9CDCFE">      result</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#C586C0">    return</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">  let</span><span style="color:#DCDCAA"> isComplexResult</span><span style="color:#D4D4D4"> = (</span><span style="color:#9CDCFE">target</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span></span>
<span data-line=""><span style="color:#D4D4D4">    (</span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> target</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span><span style="color:#D4D4D4"> || </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> target</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;object&quot;</span><span style="color:#D4D4D4">) &amp;&amp;</span></span>
<span data-line=""><span style="color:#9CDCFE">    target</span><span style="color:#D4D4D4"> !== </span><span style="color:#569CD6">null</span></span>
<span data-line=""><span style="color:#6A9955">  // 如果返回的是疑似 Promise 类型</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#DCDCAA">isComplexResult</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">)) {</span></span>
<span data-line=""><span style="color:#C586C0">    try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#9CDCFE">      thenable</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">then</span></span>
<span data-line=""><span style="color:#6A9955">      // 如果返回的是 Promise 类型，具有 then 方法</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> thenable</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">        thenable</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">call</span><span style="color:#D4D4D4">(</span></span>
<span data-line=""><span style="color:#9CDCFE">          result</span><span style="color:#D4D4D4">,</span></span>
<span data-line=""><span style="color:#569CD6">          function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">            if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">consumed</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">              return</span></span>
<span data-line=""><span style="color:#D4D4D4">            }</span></span>
<span data-line=""><span style="color:#9CDCFE">            consumed</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">            return</span><span style="color:#DCDCAA"> resolvePromise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          },</span></span>
<span data-line=""><span style="color:#569CD6">          function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">error</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">            if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">consumed</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">              return</span></span>
<span data-line=""><span style="color:#D4D4D4">            }</span></span>
<span data-line=""><span style="color:#9CDCFE">            consumed</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">            return</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">error</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          }</span></span>
<span data-line=""><span style="color:#D4D4D4">        )</span></span>
<span data-line=""><span style="color:#D4D4D4">      } </span><span style="color:#C586C0">else</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">        return</span><span style="color:#DCDCAA"> resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">consumed</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">        return</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#9CDCFE">      consumed</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">true</span></span>
<span data-line=""><span style="color:#C586C0">      return</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#D4D4D4">  } </span><span style="color:#C586C0">else</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#DCDCAA"> resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">onrejected</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#9CDCFE">  onfulfilled</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> onfulfilled</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span><span style="color:#D4D4D4"> ? </span><span style="color:#9CDCFE">onfulfilled</span><span style="color:#D4D4D4"> : (</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#9CDCFE"> data</span></span>
<span data-line=""><span style="color:#9CDCFE">  onrejected</span><span style="color:#D4D4D4"> =</span></span>
<span data-line=""><span style="color:#569CD6">    typeof</span><span style="color:#9CDCFE"> onrejected</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;function&quot;</span></span>
<span data-line=""><span style="color:#D4D4D4">      ? </span><span style="color:#9CDCFE">onrejected</span></span>
<span data-line=""><span style="color:#D4D4D4">      : (</span><span style="color:#9CDCFE">error</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">          throw</span><span style="color:#9CDCFE"> error</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A9955">  // promise2 将作为 then 方法的返回值</span></span>
<span data-line=""><span style="color:#569CD6">  let</span><span style="color:#9CDCFE"> promise2</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;fulfilled&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">      setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">        try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#6A9955">          // 这个新的 promise2 resolved 的值为 onfulfilled 的执行结果</span></span>
<span data-line=""><span style="color:#569CD6">          let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onfulfilled</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">          resolvePromise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">          reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""><span style="color:#D4D4D4">    }))</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;rejected&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">      setTimeout</span><span style="color:#D4D4D4">(() </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">        try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#6A9955">          // 这个新的 promise2 reject 的值为 onrejected 的执行结果</span></span>
<span data-line=""><span style="color:#569CD6">          let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onrejected</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">          resolvePromise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">          reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""><span style="color:#D4D4D4">    }))</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">status</span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">&quot;pending&quot;</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">    return</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">      this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onFulfilledArray</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">        try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">          let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onfulfilled</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">          resolvePromise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">          return</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">      this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">onRejectedArray</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">        try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">          let</span><span style="color:#9CDCFE"> result</span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA">onrejected</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">reason</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#DCDCAA">          resolvePromise</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promise2</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">result</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">          return</span><span style="color:#DCDCAA"> reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">        }</span></span>
<span data-line=""><span style="color:#D4D4D4">      })</span></span>
<span data-line=""><span style="color:#D4D4D4">    }))</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">prototype</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">catch</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">catchFunc</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> this</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#569CD6">null</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">catchFunc</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">resolve</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">reject</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#DCDCAA">    reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">value</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">race</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promiseArray</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (!</span><span style="color:#9CDCFE">Array</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">isArray</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promiseArray</span><span style="color:#D4D4D4">)) {</span></span>
<span data-line=""><span style="color:#C586C0">    throw</span><span style="color:#569CD6"> new</span><span style="color:#DCDCAA"> TypeError</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;The arguments should be an array!&quot;</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">      const</span><span style="color:#4FC1FF"> length</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">promiseArray</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">length</span></span>
<span data-line=""><span style="color:#C586C0">      for</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> i</span><span style="color:#D4D4D4"> = </span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4"> &lt; </span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">++) {</span></span>
<span data-line=""><span style="color:#9CDCFE">        promiseArray</span><span style="color:#D4D4D4">[</span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">].</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">      reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">all</span><span style="color:#D4D4D4"> = </span><span style="color:#569CD6">function</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">promiseArray</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (!</span><span style="color:#9CDCFE">Array</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">isArray</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">promiseArray</span><span style="color:#D4D4D4">)) {</span></span>
<span data-line=""><span style="color:#C586C0">    throw</span><span style="color:#569CD6"> new</span><span style="color:#DCDCAA"> TypeError</span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">&quot;The arguments should be an array!&quot;</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">  }</span></span>
<span data-line=""><span style="color:#C586C0">  return</span><span style="color:#569CD6"> new</span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">resolve</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#C586C0">    try</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#569CD6">      let</span><span style="color:#9CDCFE"> resultArray</span><span style="color:#D4D4D4"> = []</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#569CD6">      const</span><span style="color:#4FC1FF"> length</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">promiseArray</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">length</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">      for</span><span style="color:#D4D4D4"> (</span><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> i</span><span style="color:#D4D4D4"> = </span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4"> &lt; </span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">++) {</span></span>
<span data-line=""><span style="color:#9CDCFE">        promiseArray</span><span style="color:#D4D4D4">[</span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">].</span><span style="color:#DCDCAA">then</span><span style="color:#D4D4D4">((</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=&gt;</span><span style="color:#D4D4D4"> {</span></span>
<span data-line=""><span style="color:#9CDCFE">          resultArray</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">push</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">data</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C586C0">          if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">resultArray</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4"> === </span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">            resolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">resultArray</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">          }</span></span>
<span data-line=""><span style="color:#D4D4D4">        }, </span><span style="color:#9CDCFE">reject</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">      }</span></span>
<span data-line=""><span style="color:#D4D4D4">    } </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">) {</span></span>
<span data-line=""><span style="color:#DCDCAA">      reject</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">e</span><span style="color:#D4D4D4">)</span></span>
<span data-line=""><span style="color:#D4D4D4">    }</span></span>
<span data-line=""><span style="color:#D4D4D4">  })</span></span>
<span data-line=""><span style="color:#D4D4D4">}</span></span></code></pre></figure>
<h2>总结</h2>
<ol>
<li>Promise 可以保持某个 pending 一段时间</li>
<li>Promise 需要处理错误</li>
<li>Promise 实例添加多个 then</li>
<li>链式调用</li>
<li>Promise 穿透</li>
<li>静态方法</li>
</ol></div></article></main><script src="/_next/static/chunks/webpack-27501c456ff6145b.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/66f30814ff6d7cdf.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/92f44bb82993d879-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/media/e11418ac562b8ac1-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n5:HL[\"/_next/static/css/e3c2fb5352ee446e.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"6:I[3787,[],\"\"]\n9:I[3099,[],\"\"]\nb:I[2506,[],\"\"]\nc:I[3637,[\"177\",\"static/chunks/177-274c75a00d0077d0.js\",\"856\",\"static/chunks/856-e3a3ce37a6ba7291.js\",\"185\",\"static/chunks/app/layout-b234c99f4218b945.js\"],\"ThemeProvider\"]\nd:I[2483,[\"177\",\"static/chunks/177-274c75a00d0077d0.js\",\"856\",\"static/chunks/856-e3a3ce37a6ba7291.js\",\"185\",\"static/chunks/app/layout-b234c99f4218b945.js\"],\"default\"]\nf:I[4384,[],\"\"]\na:[\"slug\",\"promise\",\"d\"]\n10:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e3c2fb5352ee446e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"buildId\":\"PfK52rIU25hVrQueEeDIp\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/promise\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"promise\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"promise\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"promise\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L7\",\"$L8\"],null],null]},[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$a\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"sizes\":\"any\"}],[\"$\",\"body\",null,{\"className\":\"__variable_c1e5c9 __variable_3a0388\",\"children\":[\"$\",\"$Lc\",null,{\"attribute\":\"class\",\"children\":[[\"$\",\"$Ld\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex max-w-2xl w-2xl mx-auto bg-gradient\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]]}]}]]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Le\"],\"globalErrorComponent\":\"$f\",\"missingSlots\":\"$W10\"}]]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"kunsun.me\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"article\",null,{\"className\":\"font-mono\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Promise\"}],[\"$\",\"div\",null,{\"className\":\"text-[14px] text-tertiary mt-1\",\"children\":\"2021-02-02\"}],[\"$\",\"div\",null,{\"className\":\"markdown markdown-body mt-10\",\"children\":\"$L11\"}]]}]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"Promise 构造函数返回一个 promise 对象实例，这个返回的 promise 具有 then 方法。then 方法中，调用者可以定义两个参数，分别是 onfulfilled 和 onrejected，他们都是函数类型。\\n其中 onfulfilled 通过参数可以获取 promise 对象的 resolved 的值；onrejected 获得 promise 对象 rejected 的值。通过这个值，我们来处理异步完成后的逻辑。\\n通过这个值，处理异步完成后的逻辑。\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第一步\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"建立结构\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"javascript\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {}\"}]]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第二步\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"完善基本框架\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"js\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4FC1FF\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"    self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"    self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"  executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"  onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"  onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第三步\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"加入异步逻辑：在合适的时候再执行 resolve\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"js\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // 自己的resolve函数，由调用者触发\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" instanceof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"fulfilled\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onFulfilledFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // 自己的reject函数，由调用者触发\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"rejected\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onRejectedFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // 调用时执行，参数是自己定义的reject与resolve\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // 立即执行\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"  executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onreject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" data\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" =\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" error\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"fulfilled\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"rejected\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"// 调用Promise，executor\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"  resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"data\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"  setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"data\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B5CEA8\"},\"children\":\"2000\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"})\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  console\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"log\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"})\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"console\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"log\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B5CEA8\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第四步：加入任务队列逻辑\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"使用 setTimeout 模拟\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第五步：细节优化\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"抛出错误\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"将 onFulfilledFunc 存入数组\"}],\"\\n\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"javascript\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" instanceof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"fulfilled\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"forEach\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"rejected\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"forEach\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" data\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" =\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" error\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"fulfilled\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"rejected\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第六步：链式调用\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"一个 Promise 实例的 then 方法体 onfulfilled 函数和 onrejected 函数中，是支持再次返回一个 Promise 实例的，也支持返回非 Promise 的普通值。\\n修改 Promise.prototype.then:\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"js\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" data\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" =\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" error\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" promise2\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"fulfilled\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }))\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"rejected\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }))\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"        setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"            let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"            resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"            reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"        setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"            let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"            resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"            reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }))\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第七步：完善链式调用\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"这里的逻辑有些复杂\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第八步：Promise 穿透实现\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"如果 then 传入的 onfulfilled 与 onrejected 不为函数，则使用默认值\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"javascript\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4FC1FF\"},\"children\":\" promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"  setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"kunsun\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B5CEA8\"},\"children\":\"2000\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"})\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\").\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  console\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"log\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"})\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"第九步：Promise 静态方法与其他方法实现\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Promise.prototype.catch\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"js\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"catchFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"catchFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Promise.resolve\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"js\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Promise.reject\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"js\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Promise.all\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"Promise.all(iterable) 方法返回一个 Promise 实例，此实例在 iterable 参数内所有的 promise 都完成时才 resolve。如果参数中 promise 有一个失败（rejected）,此实例失败，失败原因是第一个失败 promise 的结果。\"}],\"\\n\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"javascript\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"all\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"isArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" Error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"参数不是数组\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" resolveArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4FC1FF\"},\"children\":\" length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B5CEA8\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" \u003c \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"++) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"        promiseArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"].\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"          resolveArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolveArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"            resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolveArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Promise.race\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-[14px] text-neutral-100 dark:text-neutral-800 \",\"children\":\"当 iterable 参数里任何一个成功或失败，直接返回\"}],\"\\n\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"js\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"race\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"isArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" Error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"参数不是数组\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4FC1FF\"},\"children\":\" length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"primiseArr\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B5CEA8\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" \u003c \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"++) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"        promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"].\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"最终代码\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#1E1E1E\",\"color\":\"#D4D4D4\"},\"tabIndex\":\"0\",\"data-language\":\"javascript\",\"data-theme\":\"dark-plus\",\"children\":[\"$\",\"code\",null,{\"className\":\"text-sm p-1\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" instanceof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"fulfilled\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"forEach\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"rejected\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"        this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"forEach\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          func\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    executor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolvePromise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // 当 result 和 promise2 相等时，也就是说 onfulfilled 返回 promise2 时，进行 reject\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" TypeError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"error due to circular reference\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // 是否已经执行过 onfulfilled 或者 onrejected\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" consumed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"false\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" thenable\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" instanceof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"      result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"        resolvePromise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"      result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" isComplexResult\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"target\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" target\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" || \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" target\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"object\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \u0026\u0026\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"    target\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" !== \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // 如果返回的是疑似 Promise 类型\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"isComplexResult\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"      thenable\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"then\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"      // 如果返回的是 Promise 类型，具有 then 方法\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" thenable\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"        thenable\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"call\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"          result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"            if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"consumed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"              return\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"            }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"            consumed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"true\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"            return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolvePromise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"            if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"consumed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"              return\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"            }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"            consumed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"true\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"            return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        )\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"consumed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        return\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"      consumed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"true\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" data\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"  onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" =\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"    typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"function\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      ? \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onrejected\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      : (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" error\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"  // promise2 将作为 then 方法的返回值\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"  let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" promise2\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"fulfilled\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"          // 这个新的 promise2 resolved 的值为 onfulfilled 的执行结果\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          resolvePromise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }))\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"rejected\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A9955\"},\"children\":\"          // 这个新的 promise2 reject 的值为 onrejected 的执行结果\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          resolvePromise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }))\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"status\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"pending\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onFulfilledArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onfulfilled\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          resolvePromise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"onRejectedArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"        try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"          let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"onrejected\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reason\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"          resolvePromise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promise2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }))\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"prototype\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"catchFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"null\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"catchFunc\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"    reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"value\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"race\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"isArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" TypeError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"The arguments should be an array!\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4FC1FF\"},\"children\":\" length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B5CEA8\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" \u003c \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"++) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"        promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"].\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"all\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"isArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\" TypeError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#CE9178\"},\"children\":\"\\\"The arguments should be an array!\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4EC9B0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" resultArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#4FC1FF\"},\"children\":\" length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"      for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\" i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" = \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B5CEA8\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" \u003c \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"++) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"        promiseArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"i\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"].\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#569CD6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"          resultArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"data\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"          if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resultArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" === \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"length\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"            resolve\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"resultArray\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"          }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"        }, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"      }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C586C0\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCDCAA\"},\"children\":\"      reject\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9CDCFE\"},\"children\":\"e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"  })\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#D4D4D4\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"总结\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Promise 可以保持某个 pending 一段时间\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Promise 需要处理错误\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Promise 实例添加多个 then\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"链式调用\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Promise 穿透\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"静态方法\"}],\"\\n\"]}]]\n"])</script></body></html>