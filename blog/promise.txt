3:I[3099,[],""]
5:I[2506,[],""]
6:I[3637,["177","static/chunks/177-274c75a00d0077d0.js","856","static/chunks/856-e3a3ce37a6ba7291.js","185","static/chunks/app/layout-b234c99f4218b945.js"],"ThemeProvider"]
7:I[2483,["177","static/chunks/177-274c75a00d0077d0.js","856","static/chunks/856-e3a3ce37a6ba7291.js","185","static/chunks/app/layout-b234c99f4218b945.js"],"default"]
4:["slug","promise","d"]
0:["PfK52rIU25hVrQueEeDIp",[[["",{"children":["blog",{"children":[["slug","promise","d"],{"children":["__PAGE__?{\"slug\":\"promise\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","promise","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"zh-CN","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"icon","href":"/favicon.ico","sizes":"any"}],["$","body",null,{"className":"__variable_c1e5c9 __variable_3a0388","children":["$","$L6",null,{"attribute":"class","children":[["$","$L7",null,{}],["$","main",null,{"className":"flex max-w-2xl w-2xl mx-auto bg-gradient","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]]}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e3c2fb5352ee446e.css","precedence":"next","crossOrigin":"$undefined"}]],"$L8"]]]]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"kunsun.me"}],["$","meta","3",{"name":"description","content":"Generated by create next app"}],["$","meta","4",{"name":"next-size-adjust"}]]
1:null
2:["$","article",null,{"className":"font-mono","children":[["$","h1",null,{"children":"Promise"}],["$","div",null,{"className":"text-[14px] text-tertiary mt-1","children":"2021-02-02"}],["$","div",null,{"className":"markdown markdown-body mt-10","children":"$L9"}]]}]
9:[["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"Promise 构造函数返回一个 promise 对象实例，这个返回的 promise 具有 then 方法。then 方法中，调用者可以定义两个参数，分别是 onfulfilled 和 onrejected，他们都是函数类型。\n其中 onfulfilled 通过参数可以获取 promise 对象的 resolved 的值；onrejected 获得 promise 对象 rejected 的值。通过这个值，我们来处理异步完成后的逻辑。\n通过这个值，处理异步完成后的逻辑。"}],"\n",["$","h2",null,{"children":"第一步"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"建立结构"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"javascript","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {}"}]]}]]}]}]}],"\n",["$","h2",null,{"children":"第二步"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"完善基本框架"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"js","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  const"}],["$","span",null,{"style":{"color":"#4FC1FF"},"children":" self"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  function"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"    self"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  function"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"    self"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"  executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"  onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"  onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"children":"第三步"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"加入异步逻辑：在合适的时候再执行 resolve"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"js","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // 自己的resolve函数，由调用者触发"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  const"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" instanceof"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      return"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"fulfilled\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onFulfilledFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // 自己的reject函数，由调用者触发"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  const"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"rejected\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onRejectedFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // 调用时执行，参数是自己定义的reject与resolve"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // 立即执行"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"  executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onreject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" data"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ="}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          throw"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" error"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"fulfilled\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"rejected\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"// 调用Promise，executor"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"  resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"data\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"  setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"data\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }, "}],["$","span",null,{"style":{"color":"#B5CEA8"},"children":"2000"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"})"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  console"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"log"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"})"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"console"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"log"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#B5CEA8"},"children":"1"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}]]}]}]}],"\n",["$","h2",null,{"children":"第四步：加入任务队列逻辑"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"使用 setTimeout 模拟"}],"\n",["$","h2",null,{"children":"第五步：细节优化"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"抛出错误"}],"\n",["$","li",null,{"children":"将 onFulfilledFunc 存入数组"}],"\n"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"javascript","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = []"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = []"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  const"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" instanceof"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      return"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"fulfilled\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"forEach"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  const"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"rejected\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"forEach"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" data"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ="}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          throw"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" error"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"fulfilled\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"rejected\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"children":"第六步：链式调用"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"一个 Promise 实例的 then 方法体 onfulfilled 函数和 onrejected 函数中，是支持再次返回一个 Promise 实例的，也支持返回非 Promise 的普通值。\n修改 Promise.prototype.then:"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"js","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" data"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ="}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          throw"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" error"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" promise2"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"fulfilled\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"        try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"rejected\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"        try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"        setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"            let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"            resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"            reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"        setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"            let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"            resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"            reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"children":"第七步：完善链式调用"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"这里的逻辑有些复杂"}],"\n",["$","h2",null,{"children":"第八步：Promise 穿透实现"}],"\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"如果 then 传入的 onfulfilled 与 onrejected 不为函数，则使用默认值"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"javascript","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"const"}],["$","span",null,{"style":{"color":"#4FC1FF"},"children":" promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"  setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"kunsun\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }, "}],["$","span",null,{"style":{"color":"#B5CEA8"},"children":"2000"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"})"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  console"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"log"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"})"}]}]]}]}]}],"\n",["$","h2",null,{"children":"第九步：Promise 静态方法与其他方法实现"}],"\n",["$","h3",null,{"children":"Promise.prototype.catch"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"js","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"catchFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"catchFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"children":"Promise.resolve"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"js","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"children":"Promise.reject"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"js","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"children":"Promise.all"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"Promise.all(iterable) 方法返回一个 Promise 实例，此实例在 iterable 参数内所有的 promise 都完成时才 resolve。如果参数中 promise 有一个失败（rejected）,此实例失败，失败原因是第一个失败 promise 的结果。"}],"\n"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"javascript","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"all"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" (!"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"Array"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"isArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    throw"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" Error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"参数不是数组\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" resolveArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = []"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      const"}],["$","span",null,{"style":{"color":"#4FC1FF"},"children":" length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      for"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#B5CEA8"},"children":"0"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" < "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"++) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"        promiseArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"["}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"]."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"          resolveArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolveArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"            resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolveArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }, "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"children":"Promise.race"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"className":"text-[14px] text-neutral-100 dark:text-neutral-800 ","children":"当 iterable 参数里任何一个成功或失败，直接返回"}],"\n"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"js","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"race"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" (!"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"Array"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"isArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    throw"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" Error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"参数不是数组\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      const"}],["$","span",null,{"style":{"color":"#4FC1FF"},"children":" length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"primiseArr"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      for"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#B5CEA8"},"children":"0"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" < "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"++) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"        promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"["}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"]."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"children":"最终代码"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1E1E1E","color":"#D4D4D4"},"tabIndex":"0","data-language":"javascript","data-theme":"dark-plus","children":["$","code",null,{"className":"text-sm p-1","children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = []"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = []"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  const"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" instanceof"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      return"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"fulfilled\""}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"forEach"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  const"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"rejected\""}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"        this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"forEach"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          func"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    executor"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"const"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolvePromise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // 当 result 和 promise2 相等时，也就是说 onfulfilled 返回 promise2 时，进行 reject"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" TypeError"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"error due to circular reference\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"))"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // 是否已经执行过 onfulfilled 或者 onrejected"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" consumed"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"false"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" thenable"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" instanceof"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"      result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"        resolvePromise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }, "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"else"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"      result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  let"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" isComplexResult"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"target"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" target"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" || "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" target"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"object\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") &&"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"    target"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" !== "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // 如果返回的是疑似 Promise 类型"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"isComplexResult"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"      thenable"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"then"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"      // 如果返回的是 Promise 类型，具有 then 方法"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" thenable"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"        thenable"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"call"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"          result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"            if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"consumed"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C586C0"},"children":"              return"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"            }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"            consumed"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"true"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"            return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolvePromise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          },"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"            if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"consumed"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C586C0"},"children":"              return"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"            }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"            consumed"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"true"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"            return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        )"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"else"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"        return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"consumed"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C586C0"},"children":"        return"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"      consumed"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"else"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" data"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"  onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ="}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"    typeof"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"function\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      ? "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onrejected"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      : ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"error"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          throw"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" error"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"  // promise2 将作为 then 方法的返回值"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"  let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" promise2"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"fulfilled\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"        try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"          // 这个新的 promise2 resolved 的值为 onfulfilled 的执行结果"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          resolvePromise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"rejected\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      setTimeout"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(() "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"        try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A9955"},"children":"          // 这个新的 promise2 reject 的值为 onrejected 的执行结果"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          resolvePromise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"status"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"pending\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    return"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onFulfilledArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"        try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onfulfilled"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          resolvePromise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"onRejectedArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"        try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"          let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"onrejected"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reason"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"          resolvePromise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promise2"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"result"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          return"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"prototype"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"catchFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" this"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"null"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"catchFunc"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"    reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"value"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"race"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" (!"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"Array"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"isArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    throw"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" TypeError"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"The arguments should be an array!\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      const"}],["$","span",null,{"style":{"color":"#4FC1FF"},"children":" length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      for"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#B5CEA8"},"children":"0"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" < "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"++) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"        promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"["}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"]."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4EC9B0"},"children":"Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"all"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"function"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" (!"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"Array"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"isArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    throw"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":" TypeError"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#CE9178"},"children":"\"The arguments should be an array!\""}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"  return"}],["$","span",null,{"style":{"color":"#569CD6"},"children":" new"}],["$","span",null,{"style":{"color":"#4EC9B0"},"children":" Promise"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":", "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"    try"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" resultArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = []"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#569CD6"},"children":"      const"}],["$","span",null,{"style":{"color":"#4FC1FF"},"children":" length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"      for"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#569CD6"},"children":"let"}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":" i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" = "}],["$","span",null,{"style":{"color":"#B5CEA8"},"children":"0"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" < "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"; "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"++) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"        promiseArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"["}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"i"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"]."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"then"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"(("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") "}],["$","span",null,{"style":{"color":"#569CD6"},"children":"=>"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#9CDCFE"},"children":"          resultArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#DCDCAA"},"children":"push"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"data"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C586C0"},"children":"          if"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resultArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"."}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" === "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"length"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"            resolve"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"resultArray"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"          }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"        }, "}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    } "}],["$","span",null,{"style":{"color":"#C586C0"},"children":"catch"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":" ("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#DCDCAA"},"children":"      reject"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":"("}],["$","span",null,{"style":{"color":"#9CDCFE"},"children":"e"}],["$","span",null,{"style":{"color":"#D4D4D4"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D4D4D4"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"children":"总结"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"Promise 可以保持某个 pending 一段时间"}],"\n",["$","li",null,{"children":"Promise 需要处理错误"}],"\n",["$","li",null,{"children":"Promise 实例添加多个 then"}],"\n",["$","li",null,{"children":"链式调用"}],"\n",["$","li",null,{"children":"Promise 穿透"}],"\n",["$","li",null,{"children":"静态方法"}],"\n"]}]]
